{"version":3,"file":"waterpipe.min.js","mappings":"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","sources":["webpack://waterpipe/webpack/universalModuleDefinition","webpack://waterpipe/./src/waterpipe.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"waterpipe\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"waterpipe\"] = factory();\n\telse\n\t\troot[\"waterpipe\"] = factory();\n})(this, function() {\nreturn ","const waterpipe = (function () {\r\n    'use strict';\r\n\r\n    var VERSION = '2.10.0';\r\n\r\n    var OP_EVAL = 1;\r\n    var OP_TEST = 2;\r\n    var OP_ITER_END = 3;\r\n    var OP_ITER = 4;\r\n    var OP_JUMP = 5;\r\n    var OP_SPACE = 6;\r\n    var OP_TEXT = 7;\r\n\r\n    var EVAL_STACK = 1;\r\n    var EVAL_ITER_KEY = 2;\r\n    var EVAL_ITER_INDEX = 3;\r\n    var EVAL_ITER_COUNT = 4;\r\n    var EVAL_GLOBAL = 5;\r\n    var EVAL_NOW = 6;\r\n    var EVAL_TODAY = 7;\r\n    var EVAL_RAND = 8;\r\n\r\n    var TOKEN_IF = 'if';\r\n    var TOKEN_IFNOT = 'if not';\r\n    var TOKEN_ELSE = 'else';\r\n    var TOKEN_ELSEIF = 'elseif';\r\n    var TOKEN_ELSEIFNOT = 'elseif not';\r\n    var TOKEN_FOREACH = 'foreach';\r\n\r\n    var NEWLINE = '\\r\\n';\r\n    var VOID_TAGS = 'area base br col command embed hr img input keygen link meta param source track wbr !doctype !--'.split(' ');\r\n    var CONSTANTS = {\r\n        'true': true,\r\n        'false': false,\r\n        'undefined': undefined,\r\n        'null': null,\r\n        '0': 0\r\n    };\r\n\r\n    var RegExp = /./.constructor;\r\n    var evalCount = 0;\r\n    var execStack = [];\r\n    var collator = typeof Intl !== 'undefined' && Intl.Collator && new Intl.Collator(undefined, { caseFirst: 'upper' });\r\n    var pipes = Object.create ? Object.create(null) : {};\r\n    var internals = {};\r\n    var vutil = {\r\n        each: each\r\n    };\r\n\r\n    var compares = [\r\n        function (a, b) { return compare(a, b, 1); },\r\n        function (a, b) { return compare(a, b, 1, 1); },\r\n        function (a, b) { return compare(a, b, -1); },\r\n        function (a, b) { return compare(a, b, -1, 1); }\r\n    ];\r\n\r\n    function cached(fn, str) {\r\n        var cache = fn.cache = fn.cache || {};\r\n        return cache.hasOwnProperty(str) ? cache[str] : (cache[str] = fn(str));\r\n    }\r\n\r\n    function typeValue(str) {\r\n        if (CONSTANTS.hasOwnProperty(str)) {\r\n            return CONSTANTS[str];\r\n        }\r\n        return /^(NaN|-?(?:(?:\\d+|\\d*\\.\\d+)(?:[E|e][+|-]?\\d+)?|Infinity))$/.test(str) ? parseFloat(str) : str;\r\n    }\r\n\r\n    function asdate(obj) {\r\n        if (!evallable(obj) || obj instanceof Date) {\r\n            return obj;\r\n        }\r\n        if (typeof obj === 'number') {\r\n            return new Date(obj);\r\n        }\r\n        var str = string(obj);\r\n        obj = new Date(str);\r\n        if (!/\\d{2}:\\d{2}:\\d{2}/.test(str)) {\r\n            obj.setHours(0, 0, 0, 0);\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    function slice() {\r\n        var length = arguments.length;\r\n        var arr = new Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            arr[i] = arguments[i];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function isFunction(value) {\r\n        return typeof value === 'function';\r\n    }\r\n\r\n    function isString(value) {\r\n        return typeof value === 'string';\r\n    }\r\n\r\n    function isObject(value) {\r\n        return typeof value === 'object';\r\n    }\r\n\r\n    function evallable(value) {\r\n        return value !== undefined && value !== null;\r\n    }\r\n\r\n    function primitive(value) {\r\n        return typeof value !== 'object' || value === null;\r\n    }\r\n\r\n    function hasProperty(value, name) {\r\n        if (!evallable(value) || isFunction(value[name])) {\r\n            return false;\r\n        }\r\n        if (!isObject(value)) {\r\n            return value[name] !== undefined;\r\n        }\r\n        return value.hasOwnProperty(name) || (Array.isArray(value) && /^\\d+$/.test(name));\r\n    }\r\n\r\n    function pass(value) {\r\n        return value;\r\n    }\r\n\r\n    function constFn(value) {\r\n        return function () {\r\n            return value;\r\n        };\r\n    }\r\n\r\n    function keyFn(key) {\r\n        return function (obj) {\r\n            return evallable(obj) ? obj[key] : undefined;\r\n        };\r\n    }\r\n\r\n    function detectKeyFn(varargs, arr, defaultFn) {\r\n        function isValidKey(key) {\r\n            return first(vutil, arr, function (v) {\r\n                return hasProperty(v, key);\r\n            }, true);\r\n        }\r\n        switch (varargs.state()) {\r\n            case 'func':\r\n                return varargs.fn();\r\n            case 'auto':\r\n                var key = varargs.raw();\r\n                var value = varargs.eval(key);\r\n                if (isString(value) && isValidKey(value)) {\r\n                    return cached(keyFn, value);\r\n                }\r\n                var fn = pipes[key];\r\n                if (fn && !fn.varargs && !isValidKey(key)) {\r\n                    return isFunction(fn) ? fn : function (v) {\r\n                        return run(fn, v);\r\n                    };\r\n                }\r\n                return cached(keyFn, key);\r\n            case 'end':\r\n                if (defaultFn) {\r\n                    return defaultFn;\r\n                }\r\n        }\r\n        return cached(keyFn, string(varargs.next()));\r\n    }\r\n\r\n    function json(value) {\r\n        try {\r\n            return JSON.stringify(value);\r\n        } catch (e) {\r\n            return String(value);\r\n        }\r\n    }\r\n\r\n    function string(value, stringify) {\r\n        return !evallable(value) || value !== value || isFunction(value) ? '' : isString(value) ? value : (stringify || String)(value);\r\n    }\r\n\r\n    function repeat(str, count) {\r\n        return new Array((+count || 0) + 1).join(string(str));\r\n    }\r\n\r\n    function indent(str, level, start) {\r\n        if (typeof str === 'number') {\r\n            str = repeat(' ', str);\r\n        }\r\n        return (start || '') + repeat(str, level);\r\n    }\r\n\r\n    function reverseIndex(v, i) {\r\n        return ((v || '').length || 0) - (+i || 0) - 1;\r\n    }\r\n\r\n    function parseTimeRange(str) {\r\n        var dir = 1;\r\n        if (str[0] === '+' || str[0] === '-') {\r\n            dir = str[0] === '-' ? -1 : 1;\r\n            str = str.slice(1);\r\n        }\r\n        var args = [0, 0, 0, 0, 0, 0, 0];\r\n        var m, re = /(\\d+)([yMwdhms])/g;\r\n        while ((m = re.exec(str)) !== null) {\r\n            if (m[2] === 'w') {\r\n                args[2] += parseInt(m[1]) * 7 * dir;\r\n            } else {\r\n                args['yMdhms'.indexOf(m[2])] += parseInt(m[1]) * dir;\r\n            }\r\n        }\r\n        return args;\r\n    }\r\n\r\n    function parseRegExp(str) {\r\n        return str.charAt(0) === '/' && /\\/((?![*+?])(?:[^\\r\\n\\[/\\\\]|\\\\.|\\[(?:[^\\r\\n\\]\\\\]|\\\\.)*\\])+)\\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/g.test(str) && new RegExp(RegExp.$1, RegExp.$2);\r\n    }\r\n\r\n    function parseObjectPath(str) {\r\n        var m, r = /\\)|\\$\\(?|[^.)$](?:[^.)]|\\)(?![.)]|$))*/g;\r\n        var t = [];\r\n        var cur = {\r\n            list: t,\r\n            end: false,\r\n            parent: null\r\n        };\r\n\r\n        function pop() {\r\n            detectObjectPathMode(cur.list);\r\n            return !!(cur = cur.parent);\r\n        }\r\n\r\n        while ((m = r.exec(str)) !== null) {\r\n            switch (m[0]) {\r\n                case '$':\r\n                    if (!m.index) {\r\n                        continue;\r\n                    }\r\n                case '$(':\r\n                    cur = {\r\n                        list: [],\r\n                        end: m[0] === '$',\r\n                        parent: cur\r\n                    };\r\n                    cur.parent.list.push(cur.list);\r\n                    continue;\r\n                case ')':\r\n                    cur.end = true;\r\n                    break;\r\n                default:\r\n                    cur.list.push(m[0][0] === '^' ? { fn: reverseIndex, arg: m[0].slice(1) } : m[0]);\r\n                    if (!cur.end) {\r\n                        continue;\r\n                    }\r\n            }\r\n            while (cur.end && pop());\r\n        }\r\n        while (pop());\r\n        return t;\r\n    }\r\n\r\n    function detectObjectPathMode(t) {\r\n        if (!t.length) {\r\n            t[0] = '.';\r\n        }\r\n        switch (t[0]) {\r\n            case '.':\r\n            case '@0':\r\n                t.evalMode = EVAL_STACK;\r\n                break;\r\n            case '#':\r\n            case '#key':\r\n                t.evalMode = EVAL_ITER_KEY;\r\n                break;\r\n            case '##':\r\n            case '#index':\r\n                t.evalMode = EVAL_ITER_INDEX;\r\n                break;\r\n            case '#count':\r\n                t.evalMode = EVAL_ITER_COUNT;\r\n                break;\r\n            case '_':\r\n            case '@root':\r\n                t.evalMode = EVAL_STACK;\r\n                t.stackIndex = -1;\r\n                break;\r\n            case '@global':\r\n                t.evalMode = EVAL_GLOBAL;\r\n                break;\r\n            case '@now':\r\n                t.evalMode = EVAL_NOW;\r\n                break;\r\n            case '@today':\r\n                t.evalMode = EVAL_TODAY;\r\n                break;\r\n            case '@random':\r\n                t.evalMode = EVAL_RAND;\r\n                break;\r\n            default:\r\n                if (isString(t[0]) && /^@(\\d+)$/.test(t[0])) {\r\n                    t.evalMode = EVAL_STACK;\r\n                    t.stackIndex = +RegExp.$1;\r\n                }\r\n        }\r\n    }\r\n\r\n    function escape(str, preserveEntity) {\r\n        var re = preserveEntity ? /[\"'<>]|&(?!#\\d+;|[a-z][a-z0-9]+;)/i : /[\"'&<>]/;\r\n        if (!re.exec(str)) {\r\n            return str;\r\n        }\r\n        var html = '';\r\n        var index = 0;\r\n        var lastIndex = 0;\r\n        for (index = re.lastIndex; index < str.length; index++) {\r\n            var escape;\r\n            switch (str.charCodeAt(index)) {\r\n                case 34: // \"\r\n                    escape = '&quot;';\r\n                    break;\r\n                case 38: // &\r\n                    escape = '&amp;';\r\n                    break;\r\n                case 39: // '\r\n                    escape = '&#39;';\r\n                    break;\r\n                case 60: // <\r\n                    escape = '&lt;';\r\n                    break;\r\n                case 62: // >\r\n                    escape = '&gt;';\r\n                    break;\r\n                default:\r\n                    continue;\r\n            }\r\n            if (lastIndex !== index) {\r\n                html += str.substring(lastIndex, index);\r\n            }\r\n            lastIndex = index + 1;\r\n            html += escape;\r\n        }\r\n        return lastIndex !== index ? html + str.substring(lastIndex, index) : html;\r\n    }\r\n\r\n    function hyphenate(str) {\r\n        return string(str).replace(/[A-Z](?:[A-Z]+(?=$|[A-Z]))?/g, function (v, i) {\r\n            return (i > 0 ? '-' : '') + v.toLowerCase();\r\n        });\r\n    }\r\n\r\n    function each(obj, callback) {\r\n        var i, len;\r\n        if (obj && typeof obj.length === 'number' && obj.length >= 0) {\r\n            for (i = 0, len = obj.length; i < len; i++) {\r\n                if (callback(i, obj[i]) === false) {\r\n                    return;\r\n                }\r\n            }\r\n        } else if (obj && isObject(obj)) {\r\n            var arr = Object.getOwnPropertyNames(obj);\r\n            for (i = 0, len = arr.length; i < len; i++) {\r\n                if (callback(arr[i], obj[arr[i]]) === false) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function flatten(src) {\r\n        var dst = [];\r\n        for (var i = 0, len = src.length; i < len; i++) {\r\n            if (Array.isArray(src[i])) {\r\n                for (var j = 0, src2 = src[i], len2 = src2.length; j < len2; j++) {\r\n                    if (src2[j] !== undefined && src2[j] !== null) {\r\n                        dst[dst.length] = src2[j];\r\n                    }\r\n                }\r\n            } else if (src[i] !== undefined && src[i] !== null) {\r\n                dst[dst.length] = src[i];\r\n            }\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    function extend() {\r\n        var args = slice.apply(null, arguments);\r\n        for (var i = 1, len = args.length; i < len; i++) {\r\n            for (var prop in args[i]) {\r\n                args[0][prop] = args[i][prop];\r\n            }\r\n        }\r\n        return args[0];\r\n    }\r\n\r\n    function where(varargs, arr, filter, map) {\r\n        if (!evallable(arr)) {\r\n            return arr;\r\n        }\r\n        var result = Array.isArray(arr) ? [] : {};\r\n        varargs.each(arr, function (i, v) {\r\n            if (filter(v, i)) {\r\n                result[arr.push ? result.length : i] = (map || pass)(v, i);\r\n            }\r\n        }, map || filter);\r\n        return result;\r\n    }\r\n\r\n    function first(varargs, arr, fn, returnValue, negate) {\r\n        var result;\r\n        varargs.each(arr, function (i, v) {\r\n            if (negate ^ !!fn(v, i)) {\r\n                result = returnValue || v;\r\n                return false;\r\n            }\r\n        }, fn);\r\n        return result;\r\n    }\r\n\r\n    function keys(obj) {\r\n        var keys = [];\r\n        each(obj, function (i) {\r\n            keys.push(i);\r\n        });\r\n        return keys;\r\n    }\r\n\r\n    function compare(a, b, dir, ignoreCase) {\r\n        if (Array.isArray(a) && Array.isArray(b)) {\r\n            var result;\r\n            for (var i = 0, len = Math.min(a.length, b.length); i < len && !result; i++) {\r\n                result = compare(a[i], b[i], dir, ignoreCase);\r\n            }\r\n            return result || a.length - b.length;\r\n        }\r\n        if (a === b) {\r\n            return 0;\r\n        }\r\n        var x = !evallable(a) && -1;\r\n        var y = !evallable(b) && 1;\r\n        if (x || y) {\r\n            return (x + y) * dir;\r\n        }\r\n        if (isString(a) || isString(b)) {\r\n            a = string(a);\r\n            b = string(b);\r\n            if (ignoreCase) {\r\n                /* istanbul ignore else */\r\n                if (collator) {\r\n                    return collator.compare(a, b) * dir;\r\n                } else {\r\n                    a = a.toLowerCase();\r\n                    b = b.toLowerCase();\r\n                }\r\n            }\r\n            return (a > b ? 1 : a < b ? -1 : 0) * dir;\r\n        }\r\n        return (a - b) * dir;\r\n    }\r\n\r\n    function sortby(arr, varargs, compare) {\r\n        var result = Array.isArray(arr) ? new Array(arr.length) : {};\r\n        var fn = detectKeyFn(varargs, arr);\r\n        if (!evallable(arr)) {\r\n            return arr;\r\n        }\r\n        var tmp = [];\r\n        varargs.each(arr, function (i, v) {\r\n            tmp.push([i, v, fn(v, i)]);\r\n        }, fn);\r\n        tmp.sort(function (a, b) {\r\n            return compare(a[2], b[2]);\r\n        });\r\n        each(tmp, function (i, v) {\r\n            result[arr.push ? i : v[0]] = v[1];\r\n        });\r\n        return result;\r\n    }\r\n\r\n    function inherit(base, values) {\r\n        function Anonymous() {}\r\n        Anonymous.prototype = base;\r\n        return extend(new Anonymous(), values);\r\n    }\r\n\r\n    function formatCallSite(str, start, end, cstart, cend) {\r\n        var arr = str.substr(0, cstart || start).split('\\n').reverse();\r\n        var lineStart = str.substring(str.lastIndexOf('\\n', start) + 1, start).replace(/^\\s+/, '').substr(-20);\r\n        var line = str.substring(start, str.indexOf('\\n', end) + 1 || str.length).replace(/\\r?\\n|\\s+$/g, '').substr(0, end - start + 20);\r\n        return waterpipe('at line {{$0}} column {{$1}}:\\n\\t{{$2}}{{$3}}\\n\\t{{$2.length + $4 repeat \" \"}}{{$5 repeat ^}}', [arr.length, arr[0].length + 1, lineStart, line, cstart - start || 0, cend - cstart || end - start], { html: false });\r\n    }\r\n\r\n    function strargs(fn) {\r\n        return function (str, needle) {\r\n            return fn(string(str), string(needle));\r\n        };\r\n    }\r\n\r\n    function Pipe(str, index) {\r\n        this.value = str;\r\n        this.index = index;\r\n    }\r\n    Pipe.prototype = [];\r\n\r\n    function PipeArgument(prev, str, start, end, canEvaluate) {\r\n        var self = this;\r\n        self.textValue = str;\r\n        self.value = typeValue(str);\r\n        self.canEvaluate = self.value === self.textValue && canEvaluate;\r\n        self.start = start;\r\n        self.end = end;\r\n        if (prev) {\r\n            prev.next = self;\r\n        }\r\n    }\r\n    PipeArgument.prototype.objectPath = function () {\r\n        return (this.objectPath = constFn(cached(parseObjectPath, this.textValue))).call();\r\n    };\r\n    PipeArgument.prototype.length = function () {\r\n        if (this.value === '[' && this.canEvaluate === undefined) {\r\n            for (var t = this.next, i = 1, count = 1; t; t = t.next, i++) {\r\n                if (t.value === '[') {\r\n                    count++;\r\n                } else if (t.value === ']' && t.canEvaluate === undefined && --count === 0) {\r\n                    break;\r\n                }\r\n            }\r\n            return (this.length = constFn(i)).call();\r\n        }\r\n        this.length = function () {};\r\n    };\r\n\r\n    function parsePipe(str, index) {\r\n        var t = new Pipe(str, index || 0);\r\n        var n, r = /\"(\"|(?:[^\"\\\\]|\\\\.|\"\\S)*)\"(?=\\s|$)|`(\\S+)|([^\\s\\\\]|\\\\.)(?:[^\\s\\\\]|\\\\.)*/ig;\r\n        while ((n = r.exec(str)) !== null) {\r\n            t.unshift(new PipeArgument(t[0], n[2] || (n[1] !== undefined ? n[1] : n[0]), t.index + n.index, t.index + r.lastIndex, n[2] || n[1] !== undefined ? false : n[3] === '$' ? true : undefined));\r\n        }\r\n        return t.reverse();\r\n    }\r\n\r\n    function parse(str) {\r\n        var tokens = [];\r\n        var controlStack = [{}];\r\n        var htmlStack = [];\r\n        var lastIndex = 0;\r\n        var lastIndentWS = '';\r\n        var m, r = /\\{\\{([\\/!]|foreach(?=\\s|\\})|if(?:\\snot)?(?=\\s)|else(?:if(?:\\snot)?(?=\\s))?|&?(?!\\}))\\s*((?:\\}(?!\\})|[^}])*\\}*)\\}\\}/g;\r\n\r\n        function assert(result) {\r\n            if (!result) {\r\n                throw new Error('Unexpected ' + m[0] + ' ' + formatCallSite(str, m.index, r.lastIndex));\r\n            }\r\n        }\r\n\r\n        function getPipe(str) {\r\n            return parsePipe(str, m.index + m[0].indexOf(str));\r\n        }\r\n\r\n        function parseHTML(str, htmlStackCount) {\r\n            var start = tokens.length;\r\n            var m, r = /<(\\/?)((?:[0-9a-z]+:)?[0-9a-z]+|!doctype|!--)|\\/?>|-->|([^\\s=\\/<>\"0-9.-][^\\s=\\/<>\"]*)(?:=\"|$|(?=[\\s=\\/<>\"]))|\"|(\\s+)/ig;\r\n            var lastIndex = 0;\r\n\r\n            function isScriptOrStyle() {\r\n                return (htmlStack[0].opened && (htmlStack[0].tagName === 'script' || htmlStack[0].tagName === 'style')) || htmlStack[0].tagName === '!--';\r\n            }\r\n\r\n            function shiftHtmlStack() {\r\n                return htmlStack.length > (controlStack[0].htmlStackCount || 1) && htmlStack.shift();\r\n            }\r\n\r\n            function writeText(str, stripWS, nstr) {\r\n                if (isScriptOrStyle()) {\r\n                    tokens.push({\r\n                        op: OP_TEXT,\r\n                        value: str,\r\n                        ovalue: str,\r\n                        nvalue: str\r\n                    });\r\n                    return;\r\n                }\r\n                var attrName = htmlStack[0].attrName;\r\n                var opened = htmlStack[0].opened;\r\n                if (nstr === undefined) {\r\n                    nstr = str;\r\n                }\r\n                if (stripWS || attrName || opened) {\r\n                    var last1 = tokens[tokens.length - 1];\r\n                    var last2 = tokens[tokens.length - 2];\r\n                    var newline;\r\n                    var ostr = str;\r\n                    if (!stripWS) {\r\n                        newline = str.indexOf('\\n') >= 0;\r\n                        ostr = str = str.replace(/^\\s+/g, (opened && (!last1 || last1.op !== OP_SPACE)) || (attrName && htmlStack[0].text) ? ' ' : '');\r\n                        str = attrName ? str : escape(str, true);\r\n                        newline &= (!str || str === ' ');\r\n                    } else {\r\n                        ostr = str.replace(/^\\s+/, '');\r\n                        nstr = nstr.replace(/^\\s+/, '');\r\n                    }\r\n                    htmlStack[0].text += str;\r\n                    if (newline) {\r\n                        if (last1) {\r\n                            last1.stripWSEnd = false;\r\n                        }\r\n                        tokens.push({\r\n                            op: OP_SPACE,\r\n                            value: NEWLINE,\r\n                            ovalue: nstr\r\n                        });\r\n                        return;\r\n                    }\r\n                    if (str && ((htmlStack[1] && opened) || str !== ' ')) {\r\n                        var isTagEnd = str[str.length - 1] === '>';\r\n                        if (tokens.length > start && last1.op === OP_TEXT) {\r\n                            last1.value += str;\r\n                            last1.ovalue += ostr;\r\n                            last1.nvalue += nstr;\r\n                            last1.isTagEnd = isTagEnd;\r\n                            last1.stripWSEnd = stripWS;\r\n                        } else if (tokens.length > start + 1 && last2.op === OP_TEXT && last1.value !== NEWLINE) {\r\n                            var ch = (str[0] === '<' || last2.isTagEnd || (!stripWS && !last2.stripWSEnd)) ? last1.value : '';\r\n                            last2.value += ch + str;\r\n                            last2.ovalue += last1.ovalue + ostr;\r\n                            last2.nvalue += last1.ovalue + nstr;\r\n                            last2.isTagEnd = isTagEnd;\r\n                            last2.stripWSEnd = stripWS;\r\n                            tokens.pop();\r\n                        } else {\r\n                            tokens.push({\r\n                                op: OP_TEXT,\r\n                                stripWS: stripWS,\r\n                                stripWSEnd: stripWS,\r\n                                isTagEnd: isTagEnd,\r\n                                value: str,\r\n                                ovalue: ostr,\r\n                                nvalue: nstr,\r\n                                indent: htmlStack.length - 2 + !!htmlStack[0].opened\r\n                            });\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n                tokens.push({\r\n                    op: OP_SPACE,\r\n                    value: ' ',\r\n                    ovalue: nstr\r\n                });\r\n            }\r\n\r\n            while ((m = r.exec(str)) !== null) {\r\n                if (lastIndex !== m.index) {\r\n                    writeText(str.substring(lastIndex, m.index));\r\n                }\r\n                lastIndex = r.lastIndex;\r\n\r\n                switch (m[0].charAt(0)) {\r\n                    case '<':\r\n                        if (isScriptOrStyle() && (!m[1] || m[2].toLowerCase() !== htmlStack[0].tagName)) {\r\n                            writeText(m[0], true);\r\n                        } else {\r\n                            while (VOID_TAGS.indexOf(htmlStack[0].tagName) >= 0 && shiftHtmlStack());\r\n                            if (m[1]) {\r\n                                if (htmlStack[0].tagName !== m[2] || htmlStack.length <= (controlStack[0].htmlStackCount || 1)) {\r\n                                    htmlStack[0].muteTagEnd = true;\r\n                                    htmlStack[0].opened = undefined;\r\n                                } else {\r\n                                    htmlStack[0].opened = false;\r\n                                    writeText(m[0], true);\r\n                                }\r\n                            } else {\r\n                                htmlStack.unshift({\r\n                                    tagName: m[2].toLowerCase(),\r\n                                    text: ''\r\n                                });\r\n                                writeText(m[0].toLowerCase(), true);\r\n                                htmlStack[0].index = tokens.length - 1;\r\n                            }\r\n                        }\r\n                        continue;\r\n                    case '>':\r\n                    case '/':\r\n                    case '-':\r\n                        if (htmlStack[0].tagName && (!htmlStack[0].opened || m[0] === '/>' || m[0] === '-->')) {\r\n                            if (htmlStack[0].muteTagEnd) {\r\n                                htmlStack[0].muteTagEnd = false;\r\n                            } else {\r\n                                writeText(m[0], true);\r\n                            }\r\n                            if ((htmlStack[0].opened !== false && m[0] !== '/>' && m[0] !== '-->') || !shiftHtmlStack()) {\r\n                                htmlStack[0].opened = true;\r\n                            }\r\n                            continue;\r\n                        }\r\n                        break;\r\n                    case '\"':\r\n                        if (htmlStack[0].attrName && shiftHtmlStack()) {\r\n                            writeText(m[0], true);\r\n                            continue;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        if (htmlStack[0].tagName && !m[4]) {\r\n                            if (htmlStack[0].tagName !== '!--' && !htmlStack[0].opened) {\r\n                                writeText(' ' + m[0], true);\r\n                                if (m[0].indexOf('=') >= 0) {\r\n                                    htmlStack.unshift({\r\n                                        attrName: m[3],\r\n                                        text: ''\r\n                                    });\r\n                                }\r\n                                continue;\r\n                            }\r\n                        } else if (htmlStack[0].attrName) {\r\n                            if (m[0][m[0].length - 1] === '\"') {\r\n                                writeText(m[0].slice(0, -1));\r\n                                shiftHtmlStack();\r\n                                writeText('\"', true);\r\n                                continue;\r\n                            }\r\n                        }\r\n                }\r\n                writeText(m[0]);\r\n            }\r\n            if (lastIndex !== str.length) {\r\n                writeText(str.substr(lastIndex));\r\n            }\r\n            while (htmlStack[htmlStackCount]) {\r\n                var tagName = htmlStack.shift().tagName;\r\n                if (VOID_TAGS.indexOf(tagName) < 0) {\r\n                    writeText('</' + tagName + '>', true, '');\r\n                }\r\n            }\r\n        }\r\n\r\n        str = string(str).replace(/^\\r?\\n/, '');\r\n        htmlStack.unshift({\r\n            opened: true,\r\n            text: ''\r\n        });\r\n        while ((m = r.exec(str)) !== null) {\r\n            if (lastIndex !== m.index) {\r\n                var cur = str.substring(lastIndex, m.index);\r\n                if (/^([^\\S\\r\\n]*(\\r?\\n[^\\S\\r\\n]*))(\\S?)/.test(cur)) {\r\n                    cur = RegExp.$2.slice(lastIndentWS.length) + cur.slice(RegExp.$1.length);\r\n                    if (RegExp.$3) {\r\n                        tokens.push({\r\n                            op: OP_SPACE,\r\n                            value: NEWLINE,\r\n                            ovalue: ''\r\n                        });\r\n                    }\r\n                }\r\n                lastIndentWS = /(\\r?\\n[^\\S\\r\\n]*)?$/.test(cur) && RegExp.$1 || '';\r\n                parseHTML(cur);\r\n            } else {\r\n                lastIndentWS = '';\r\n            }\r\n            lastIndex = r.lastIndex;\r\n\r\n            switch (m[1]) {\r\n                case '!':\r\n                    break;\r\n                case '/':\r\n                    assert(controlStack[0] && m[2] === controlStack[0].tokenName);\r\n                    parseHTML('', controlStack[0].htmlStackCount);\r\n                    controlStack[0].token.index = tokens.length;\r\n                    if (controlStack[0].tokenIf && !controlStack[0].tokenIf.index) {\r\n                        controlStack[0].tokenIf.index = tokens.length;\r\n                    }\r\n                    if (m[2] === TOKEN_FOREACH) {\r\n                        tokens.push({\r\n                            op: OP_ITER_END,\r\n                            index: controlStack[0].tokenIndex + 1\r\n                        });\r\n                    }\r\n                    controlStack.shift();\r\n                    break;\r\n                case TOKEN_IF:\r\n                case TOKEN_IFNOT:\r\n                    controlStack.unshift({\r\n                        htmlStackCount: htmlStack.length,\r\n                        tokenIndex: tokens.length,\r\n                        tokenName: TOKEN_IF,\r\n                        token: {\r\n                            op: OP_TEST,\r\n                            condition: getPipe(m[2]),\r\n                            negate: m[1] === TOKEN_IFNOT\r\n                        }\r\n                    });\r\n                    tokens.push(controlStack[0].token);\r\n                    break;\r\n                case TOKEN_ELSE:\r\n                case TOKEN_ELSEIF:\r\n                case TOKEN_ELSEIFNOT:\r\n                    assert(controlStack[0] && controlStack[0].tokenName === TOKEN_IF);\r\n                    parseHTML('', controlStack[0].htmlStackCount);\r\n                    var previousControl = controlStack.splice(0, 1, {\r\n                        htmlStackCount: controlStack[0].htmlStackCount,\r\n                        tokenIndex: tokens.length,\r\n                        tokenName: TOKEN_IF,\r\n                        token: {\r\n                            op: OP_JUMP\r\n                        }\r\n                    })[0];\r\n                    (previousControl.tokenIf || previousControl.token).index = tokens.length + 1;\r\n                    if (previousControl.token.op === OP_JUMP) {\r\n                        controlStack[0].token = previousControl.token;\r\n                    }\r\n                    tokens.push(controlStack[0].token);\r\n                    if (m[1] === TOKEN_ELSEIF || m[1] === TOKEN_ELSEIFNOT) {\r\n                        controlStack[0].tokenIf = {\r\n                            op: OP_TEST,\r\n                            condition: getPipe(m[2]),\r\n                            negate: m[1] === TOKEN_ELSEIFNOT\r\n                        };\r\n                        tokens.push(controlStack[0].tokenIf);\r\n                    }\r\n                    break;\r\n                case TOKEN_FOREACH:\r\n                    controlStack.unshift({\r\n                        htmlStackCount: htmlStack.length,\r\n                        tokenIndex: tokens.length,\r\n                        tokenName: TOKEN_FOREACH,\r\n                        token: {\r\n                            op: OP_ITER,\r\n                            expression: getPipe(m[2])\r\n                        }\r\n                    });\r\n                    tokens.push(controlStack[0].token);\r\n                    break;\r\n                default:\r\n                    lastIndentWS = '';\r\n                    tokens.push({\r\n                        op: OP_EVAL,\r\n                        expression: getPipe(m[2]),\r\n                        noescape: m[1] === '&',\r\n                        indent: htmlStack.length - 1\r\n                    });\r\n            }\r\n        }\r\n        parseHTML(str.substr(lastIndex), 1);\r\n        for (var i = tokens.length - 1, j = 0; i >= 0; i--) {\r\n            if (tokens[i].indent !== undefined) {\r\n                j = tokens[i].indent;\r\n            } else {\r\n                tokens[i].indent = j;\r\n            }\r\n        }\r\n        tokens.value = str;\r\n        return tokens;\r\n    }\r\n\r\n    function Iterable(obj) {\r\n        this.values = obj;\r\n        if (obj && typeof obj.length === 'number' && obj.length >= 0) {\r\n            this.length = obj.length;\r\n        } else {\r\n            this.keys = obj && isObject(obj) ? Object.getOwnPropertyNames(obj) : [];\r\n            this.length = this.keys.length;\r\n        }\r\n    }\r\n\r\n    Iterable.prototype.get = function (index) {\r\n        return this.keys ? this.values[this.keys[index]] : this.values[index];\r\n    };\r\n\r\n    function evaluate(tokens, options, outstr) {\r\n        var output = [];\r\n        var objStack = options.objStack || [];\r\n        var iteratorStack = options.iteratorStack || [];\r\n        var warnedPos = {};\r\n        var result;\r\n\r\n        function objAt(index) {\r\n            return objStack[index] instanceof Iterable ? objStack[index].get(iteratorStack[index]) : objStack[index];\r\n        }\r\n\r\n        function evaluateInScope(obj, index, run) {\r\n            try {\r\n                objStack.unshift(obj);\r\n                iteratorStack.unshift(index);\r\n                return run();\r\n            } finally {\r\n                objStack.shift();\r\n                iteratorStack.shift();\r\n            }\r\n        }\r\n\r\n        function evaluateObjectPathPart(p, value) {\r\n            if (Array.isArray(p)) {\r\n                return string(evaluateObjectPath(p));\r\n            }\r\n            if (typeof p === 'object') {\r\n                return p.fn(value, p.arg);\r\n            }\r\n            return p;\r\n        }\r\n\r\n        function evaluateObjectPath(objectPath, acceptShorthand) {\r\n            if (!objectPath || !objectPath[0]) {\r\n                evaluateObjectPath.valid = true;\r\n                return objAt(0);\r\n            }\r\n            var value;\r\n            var valid = evaluateObjectPath.valid = acceptShorthand || !objectPath.evalMode || (objectPath[0].length > 1 && objectPath[0] !== '##');\r\n            switch (objectPath.evalMode) {\r\n                case EVAL_ITER_KEY:\r\n                    return objStack[0] instanceof Iterable && objStack[0].keys ? objStack[0].keys[iteratorStack[0]] : iteratorStack[0];\r\n                case EVAL_ITER_INDEX:\r\n                    return iteratorStack[0];\r\n                case EVAL_ITER_COUNT:\r\n                    return objStack[0] instanceof Iterable ? objStack[0].length : 0;\r\n                case EVAL_STACK:\r\n                    value = objAt(objectPath.stackIndex < 0 ? objectPath.stackIndex + objStack.length : objectPath.stackIndex || 0);\r\n                    break;\r\n                case EVAL_GLOBAL:\r\n                    value = options.globals;\r\n                    break;\r\n                case EVAL_NOW:\r\n                    value = +new Date();\r\n                    break;\r\n                case EVAL_TODAY:\r\n                    value = new Date();\r\n                    value.setHours(0, 0, 0, 0);\r\n                    value = +value;\r\n                    break;\r\n                case EVAL_RAND:\r\n                    value = Math.random();\r\n                    break;\r\n                default:\r\n                    var name = evaluateObjectPathPart(objectPath[0], value);\r\n                    for (var j = 0, length = objStack.length; j < length; j++) {\r\n                        value = objAt(j);\r\n                        if (hasProperty(value, name)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (j === objStack.length) {\r\n                        value = options.globals;\r\n                        if (!(name in value)) {\r\n                            evaluateObjectPath.valid = false;\r\n                            return;\r\n                        }\r\n                    }\r\n                    value = value[name];\r\n            }\r\n            for (var i = 1, len = objectPath.length; i < len && evallable(value); i++) {\r\n                value = value[evaluateObjectPathPart(objectPath[i], value)];\r\n            }\r\n            evaluateObjectPath.valid = valid;\r\n            return isFunction(value) ? undefined : value;\r\n        }\r\n\r\n        function evaluatePipe(pipe, start, end) {\r\n            start = start || 0;\r\n            end = end || pipe.length - 1;\r\n\r\n            var returnArray = [];\r\n            var input = evaluateObjectPath();\r\n            var i = start;\r\n            var resetPos = start;\r\n\r\n            var varargs = {\r\n                globals: options.globals,\r\n                eval: function (objectPath) {\r\n                    return evaluateObjectPath(cached(parseObjectPath, objectPath));\r\n                },\r\n                stop: function () {\r\n                    i = end + 1;\r\n                    return value;\r\n                },\r\n                push: function (value) {\r\n                    returnArray.push(value);\r\n                    return value;\r\n                },\r\n                reset: function () {\r\n                    resetPos = i;\r\n                    return varargs.next();\r\n                },\r\n                hasArgs: function () {\r\n                    return i <= end;\r\n                },\r\n                state: function () {\r\n                    return i > end ? 'end' : pipe[i].length() ? 'func' : pipe[i].canEvaluate === undefined ? 'auto' : pipe[i].canEvaluate ? 'path' : 'const';\r\n                },\r\n                raw: function () {\r\n                    return i <= end ? varargs.fn() || pipe[i++].value : undefined;\r\n                },\r\n                next: function (preferObject) {\r\n                    var reset = resetPos === i;\r\n                    if (i > end) {\r\n                        return reset ? input : undefined;\r\n                    }\r\n                    if (pipe[i].canEvaluate === false) {\r\n                        return pipe[i++].value;\r\n                    }\r\n                    var fn = varargs.fn();\r\n                    if (fn) {\r\n                        return fn(reset ? input : value);\r\n                    }\r\n                    var v = evaluateObjectPath(pipe[i].objectPath(), reset);\r\n                    if (pipe[i].canEvaluate || (evaluateObjectPath.valid && (reset || preferObject || !primitive(value) || primitive(v)))) {\r\n                        return (++i, v);\r\n                    }\r\n                    return reset ? input : pipe[i++].value;\r\n                },\r\n                fn: function (wrapFn) {\r\n                    var start = i;\r\n                    var len = i <= end && pipe[i].length();\r\n                    if (len) {\r\n                        var run = function () {\r\n                            return evaluatePipe(pipe, start + 1, start + len - 1);\r\n                        };\r\n                        i += len + 1;\r\n                        return function fn(obj, index) {\r\n                            return objStack[0] instanceof Iterable && objStack[0].fn === fn ? run() : evaluateInScope(arguments.length ? obj : value, index, run);\r\n                        };\r\n                    }\r\n                    if (isFunction(wrapFn)) {\r\n                        return wrapFn(varargs.next());\r\n                    }\r\n                },\r\n                each: function (obj, callback, fn) {\r\n                    var iterable = new Iterable(obj);\r\n                    iterable.fn = fn;\r\n                    evaluateInScope(iterable, 0, function () {\r\n                        for (var i, j = 0, len = iterable.length; j < len; j++) {\r\n                            iteratorStack[0] = j;\r\n                            i = iterable.keys ? iterable.keys[j] : j;\r\n                            if (callback(i, iterable.get(j)) === false) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n\r\n            var value = varargs.reset();\r\n            while (i <= end) {\r\n                var startpos = i;\r\n                var name = pipe[i++].textValue;\r\n                try {\r\n                    var func = pipes[name] || pipes.__default__(name);\r\n                    if (isFunction(func)) {\r\n                        if (func.varargs) {\r\n                            value = func.call(options.globals, value, varargs);\r\n                        } else {\r\n                            switch (func.length) {\r\n                                case 1:\r\n                                    value = func.call(options.globals, value);\r\n                                    break;\r\n                                case 2:\r\n                                    value = func.call(options.globals, value, varargs.next());\r\n                                    break;\r\n                                case 3:\r\n                                    value = func.call(options.globals, value, varargs.next(), varargs.next());\r\n                                    break;\r\n                                case 4:\r\n                                    value = func.call(options.globals, value, varargs.next(), varargs.next(), varargs.next());\r\n                                    break;\r\n                                default:\r\n                                    var args = new Array(func.length);\r\n                                    args[0] = value;\r\n                                    for (var j = 1, len = func.length; j < len; j++) {\r\n                                        args[j] = varargs.next();\r\n                                    }\r\n                                    value = func.apply(options.globals, args);\r\n                            }\r\n                        }\r\n                    } else if (isString(func)) {\r\n                        value = apply(value, func);\r\n                    } else if (startpos === resetPos) {\r\n                        value = pipe[i - 1].canEvaluate === false ? pipe[i - 1].value : undefined;\r\n                    } else {\r\n                        throw new Error('Invalid pipe function');\r\n                    }\r\n                } catch (e) {\r\n                    var cstart = pipe[startpos].start;\r\n                    if (warnedPos[cstart] || options.noWarning) {\r\n                        return;\r\n                    }\r\n                    warnedPos[cstart] = true;\r\n                    return console.warn(e.toString() + ' ' + formatCallSite(tokens.value, pipe.index, pipe.index + pipe.value.length, cstart, pipe[i - 1].end) + (e.stack || '').substr(e.toString().length));\r\n                }\r\n            }\r\n            return returnArray.length ? flatten(returnArray.concat(value)) : value;\r\n        }\r\n\r\n        try {\r\n            var i = options.start || 0;\r\n            var e = options.end || tokens.length;\r\n            var ws = false;\r\n            execStack.unshift(options);\r\n            while (i < e) {\r\n                var t = tokens[i++];\r\n                options.level = t.indent;\r\n                switch (t.op) {\r\n                    case OP_EVAL:\r\n                        var prevCount = evalCount;\r\n                        result = evaluatePipe(t.expression);\r\n                        if (evallable(result)) {\r\n                            outstr = outstr !== undefined;\r\n                            if (ws) {\r\n                                output.push(ws);\r\n                            }\r\n                            ws = undefined;\r\n                            output.push((evalCount !== prevCount || t.noescape || options.noEncode ? pass : escape)(string(result, json)));\r\n                        }\r\n                        break;\r\n                    case OP_ITER:\r\n                        objStack.unshift(new Iterable(evaluatePipe(t.expression)));\r\n                        iteratorStack.unshift(0);\r\n                        if (!objStack[0].length) {\r\n                            i = t.index;\r\n                        }\r\n                        break;\r\n                    case OP_ITER_END:\r\n                        if (++iteratorStack[0] >= objStack[0].length) {\r\n                            objStack.shift();\r\n                            iteratorStack.shift();\r\n                        } else {\r\n                            i = t.index;\r\n                        }\r\n                        break;\r\n                    case OP_TEST:\r\n                        if (!evaluatePipe(t.condition) ^ t.negate) {\r\n                            i = t.index;\r\n                        }\r\n                        break;\r\n                    case OP_JUMP:\r\n                        i = t.index;\r\n                        break;\r\n                    case OP_SPACE:\r\n                        if (!options.html) {\r\n                            output.push(t.ovalue);\r\n                        } else if (ws === false) {\r\n                            ws = undefined;\r\n                        } else if (t.value === NEWLINE && options.indent) {\r\n                            var k = NEWLINE + indent(options.indent, t.indent, options.indentPadding);\r\n                            if (k.indexOf(output[output.length - 1]) === 0) {\r\n                                output.pop();\r\n                            }\r\n                            output.push(k);\r\n                            ws = undefined;\r\n                        } else {\r\n                            ws = t.value;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        if (ws && !t.stripWS) {\r\n                            output.push(ws);\r\n                        }\r\n                        output.push(options.html === false ? t.nvalue : options.noEncode ? t.ovalue : t.value);\r\n                        outstr = true;\r\n                        ws = t.stripWSEnd ? false : undefined;\r\n                }\r\n            }\r\n        } finally {\r\n            evalCount = (evalCount + !!outstr) & 0xFFFF;\r\n            execStack.shift();\r\n        }\r\n        if (options.indent && options.indentPadding && !options.trimStart) {\r\n            output.unshift(options.indentPadding);\r\n        }\r\n        return outstr === true ? output.join('') : result;\r\n    }\r\n\r\n    function apply(data, str) {\r\n        return run(str, data, extend({}, execStack[0], {\r\n            indentPadding: undefined,\r\n            trimStart: true\r\n        }));\r\n    }\r\n\r\n    function getOptions(options, data) {\r\n        options = extend({}, waterpipe.defaultOptions, options || {});\r\n        return {\r\n            html: options.html !== false,\r\n            noEncode: options.html === false || options.noEncode,\r\n            noWarning: options.noWarning,\r\n            indent: evallable(options.indent) ? indent(options.indent, 1) : '',\r\n            indentPadding: evallable(options.indentPadding) ? indent(options.indentPadding, 1) : execStack[0] ? indent(execStack[0].indent, execStack[0].level, execStack[0].indentPadding) : '',\r\n            trimStart: options.trimStart,\r\n            objStack: [data],\r\n            globals: inherit(waterpipe.globals, options.globals)\r\n        };\r\n    }\r\n\r\n    function run(str, data, options, outstr) {\r\n        str = string(str || '');\r\n        return evaluate(cached(parse, str), getOptions(options, data), outstr);\r\n    }\r\n\r\n    function waterpipe(str, data, options) {\r\n        return run(str, data, options, true);\r\n    }\r\n\r\n    waterpipe.defaultOptions = {};\r\n    waterpipe.globals = {};\r\n    waterpipe.string = string;\r\n    waterpipe.eval = function (str, data, options) {\r\n        var tokens = [{ op: OP_EVAL, expression: cached(parsePipe, str) }];\r\n        tokens.value = str;\r\n        return evaluate(tokens, getOptions(options, data));\r\n    };\r\n    waterpipe.pipes = extend(pipes, {\r\n        __default__: constFn(),\r\n        keys: keys,\r\n        max: Math.min,\r\n        min: Math.max,\r\n        abs: Math.abs,\r\n        round: Math.round,\r\n        floor: Math.floor,\r\n        ceil: Math.ceil,\r\n        asdate: asdate,\r\n        eval: apply,\r\n        as: function (obj, varargs) {\r\n            var name = varargs.raw();\r\n            return (varargs.globals[string(isFunction(name) ? name() : name)] = obj);\r\n        },\r\n        let: function (obj, varargs) {\r\n            while (varargs.hasArgs()) {\r\n                var name = varargs.raw();\r\n                varargs.globals[string(isFunction(name) ? name() : name)] = varargs.next();\r\n            }\r\n        },\r\n        select: function (obj, varargs) {\r\n            return detectKeyFn(varargs, [obj])(obj);\r\n        },\r\n        more: function (a, b) {\r\n            return (compare(a, b, 1) > 0);\r\n        },\r\n        less: function (a, b) {\r\n            return (compare(a, b, 1) < 0);\r\n        },\r\n        ormore: function (a, b) {\r\n            return (compare(a, b, 1) >= 0);\r\n        },\r\n        orless: function (a, b) {\r\n            return (compare(a, b, 1) <= 0);\r\n        },\r\n        between: function (a, b, c) {\r\n            var d = compare(b, c, 1) >= 0 ? [c, b] : [b, c];\r\n            return (compare(a, d[0], 1) >= 0 && compare(a, d[1], 1) <= 0);\r\n        },\r\n        equals: function (a, b) {\r\n            return (string(a) === string(b));\r\n        },\r\n        notequals: function (a, b) {\r\n            return (string(a) !== string(b));\r\n        },\r\n        iequals: strargs(function (a, b) {\r\n            return a.toLowerCase() === b.toLowerCase();\r\n        }),\r\n        inotequals: strargs(function (a, b) {\r\n            return a.toLowerCase() !== b.toLowerCase();\r\n        }),\r\n        startswith: strargs(function (a, b) {\r\n            return b && a.substr(0, b.length) === b;\r\n        }),\r\n        endswith: strargs(function (a, b) {\r\n            return b && a.substr(-b.length) === b;\r\n        }),\r\n        even: function (num) {\r\n            return ((+num & 1) === 0);\r\n        },\r\n        odd: function (num) {\r\n            return ((+num & 1) === 1);\r\n        },\r\n        contains: function (str, needle) {\r\n            return (string(str).indexOf(needle) >= 0);\r\n        },\r\n        like: function (str, regex) {\r\n            regex = cached(parseRegExp, regex);\r\n            return (regex !== false && regex.test(str));\r\n        },\r\n        or: function (obj, val) {\r\n            return obj || val;\r\n        },\r\n        not: function (obj, varargs) {\r\n            return !(varargs.hasArgs() ? varargs.next() : obj);\r\n        },\r\n        choose: function (bool, trueValue, falseValue) {\r\n            return bool ? trueValue : falseValue;\r\n        },\r\n        test: function (obj, varargs) {\r\n            var testFn = varargs.next();\r\n            var trueFn = varargs.fn(constFn);\r\n            var falseFn = varargs.fn(constFn);\r\n            return testFn ? trueFn() : falseFn();\r\n        },\r\n        length: function (obj) {\r\n            return (evallable(obj) && +obj.length) || +obj || 0;\r\n        },\r\n        concat: function (a, b) {\r\n            return string(a) + string(b);\r\n        },\r\n        substr: function (str, start, len) {\r\n            return string(str).substr(start, len);\r\n        },\r\n        replace: function (str, varargs) {\r\n            var regex = string(varargs.next());\r\n            var fn = varargs.fn() || string(varargs.next());\r\n            return string(str).replace(cached(parseRegExp, regex) || regex, !fn.call ? fn : function () {\r\n                var m = slice.apply(null, arguments);\r\n                m.input = m.pop();\r\n                m.index = m.pop();\r\n                return string(fn(m));\r\n            });\r\n        },\r\n        trim: function (str) {\r\n            return string(str).replace(/^\\s+|\\s+$/g, '');\r\n        },\r\n        trimstart: function (str) {\r\n            return string(str).replace(/^\\s+/, '');\r\n        },\r\n        trimend: function (str) {\r\n            return string(str).replace(/\\s+$/, '');\r\n        },\r\n        padstart: strargs(function (str, needle) {\r\n            return str.substr(0, needle.length) !== needle ? needle + str : str;\r\n        }),\r\n        padend: strargs(function (str, needle) {\r\n            return str.substr(-needle.length) !== needle ? str + needle : str;\r\n        }),\r\n        removestart: strargs(function (str, needle) {\r\n            return str.substr(0, needle.length) === needle ? str.slice(needle.length) : str;\r\n        }),\r\n        removeend: strargs(function (str, needle) {\r\n            return str.substr(-needle.length) === needle ? str.slice(0, -needle.length) : str;\r\n        }),\r\n        cutbefore: strargs(function (str, needle) {\r\n            return str.substr(0, (str.indexOf(needle) + 1 || str.length + 1) - 1);\r\n        }),\r\n        cutbeforelast: strargs(function (str, needle) {\r\n            return str.substr(0, (str.lastIndexOf(needle) + 1 || str.length + 1) - 1);\r\n        }),\r\n        cutafter: strargs(function (str, needle) {\r\n            return str.substr(needle.length + (str.indexOf(needle) + 1 || -needle.length + 1) - 1);\r\n        }),\r\n        cutafterlast: strargs(function (str, needle) {\r\n            return str.substr(needle.length + (str.lastIndexOf(needle) + 1 || -needle.length + 1) - 1);\r\n        }),\r\n        split: function (str, separator) {\r\n            return where(vutil, string(str).split(separator), pass);\r\n        },\r\n        repeat: function (count, str) {\r\n            return repeat(str, count);\r\n        },\r\n        upper: function (str) {\r\n            return string(str).toUpperCase();\r\n        },\r\n        lower: function (str) {\r\n            return string(str).toLowerCase();\r\n        },\r\n        ucfirst: function (str) {\r\n            str = string(str);\r\n            return str.charAt(0).toUpperCase() + str.substr(1);\r\n        },\r\n        lcfirst: function (str) {\r\n            str = string(str);\r\n            return str.charAt(0).toLowerCase() + str.substr(1);\r\n        },\r\n        hyphenate: function (str) {\r\n            return cached(hyphenate, str);\r\n        },\r\n        plus: function (a, b) {\r\n            return (+a || 0) + (+b || 0);\r\n        },\r\n        minus: function (a, b) {\r\n            return (+a || 0) - (+b || 0);\r\n        },\r\n        multiply: function (a, b) {\r\n            return (+a || 0) * (+b || 0);\r\n        },\r\n        divide: function (a, b) {\r\n            return (+a || 0) / (+b || 0);\r\n        },\r\n        mod: function (a, b) {\r\n            return (+a || 0) % (+b || 0);\r\n        },\r\n        pow: function (a, b) {\r\n            return Math.pow(+a || 0, +b || 0);\r\n        },\r\n        to: function (a, b) {\r\n            var start = +a;\r\n            var end = +b;\r\n            var pattern;\r\n            var numDigit;\r\n            if (isNaN(start) || isNaN(end)) {\r\n                var re = /(\\d+|\\d*\\.\\d+)/;\r\n                pattern = string(a).replace(re, '0');\r\n                start = +RegExp.$1;\r\n                numDigit = RegExp.$1.length;\r\n                if (string(b).replace(re, '0') !== pattern) {\r\n                    return [a];\r\n                }\r\n                end = +RegExp.$1;\r\n            }\r\n            start = start || 0;\r\n            end = end || 0;\r\n            var arr = [];\r\n            var step = (end - start) / Math.abs(end - start);\r\n            var format = function (n) {\r\n                var m = Math.abs(n).toString();\r\n                return m.length < numDigit ? new Array(numDigit - m.length + 1).join('0') + m : m;\r\n            };\r\n            for (; (end - start) / step > 0; start += step) {\r\n                arr.push(pattern ? pattern.replace('0', format(start)) : start);\r\n            }\r\n            arr.push(pattern ? pattern.replace('0', format(end)) : end);\r\n            return arr;\r\n        },\r\n        join: function (arr, str) {\r\n            return [].concat(arr).join(string(str));\r\n        },\r\n        reverse: function (arr) {\r\n            return [].concat(arr).reverse();\r\n        },\r\n        sort: function (arr) {\r\n            return [].concat(arr).sort(compares[0]);\r\n        },\r\n        isort: function (arr) {\r\n            return [].concat(arr).sort(compares[1]);\r\n        },\r\n        rsort: function (arr) {\r\n            return [].concat(arr).sort(compares[2]);\r\n        },\r\n        irsort: function (arr) {\r\n            return [].concat(arr).sort(compares[3]);\r\n        },\r\n        slice: function (arr, a, b) {\r\n            return [].concat(arr).slice(a, b);\r\n        },\r\n        unique: function (arr) {\r\n            arr = [].concat(arr);\r\n            var hash = {};\r\n            var result = [];\r\n            for (var i = 0, length = arr.length; i < length; ++i) {\r\n                if (!hash.hasOwnProperty(arr[i])) {\r\n                    hash[arr[i]] = true;\r\n                    result.push(arr[i]);\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        first: function (arr, varargs) {\r\n            return first(varargs, arr, detectKeyFn(varargs, arr));\r\n        },\r\n        any: function (arr, varargs) {\r\n            return !!first(varargs, arr, detectKeyFn(varargs, arr), true);\r\n        },\r\n        all: function (arr, varargs) {\r\n            return !first(varargs, arr, detectKeyFn(varargs, arr), true, true);\r\n        },\r\n        none: function (arr, varargs) {\r\n            return !first(varargs, arr, detectKeyFn(varargs, arr), true);\r\n        },\r\n        where: function (arr, varargs) {\r\n            return where(varargs, arr, detectKeyFn(varargs, arr));\r\n        },\r\n        map: function (arr, varargs) {\r\n            return where(varargs, arr, constFn(true), detectKeyFn(varargs, arr));\r\n        },\r\n        sum: function (arr, varargs) {\r\n            var result;\r\n            var fn = varargs.fn() || ((result = varargs.next()), detectKeyFn(varargs, arr, pass));\r\n            varargs.each(arr, function (i, v) {\r\n                result = result !== undefined ? result + fn(v, i) : fn(v, i);\r\n            }, fn);\r\n            return result;\r\n        },\r\n        sortby: function (arr, varargs) {\r\n            return sortby(arr, varargs, compares[0]);\r\n        },\r\n        isortby: function (arr, varargs) {\r\n            return sortby(arr, varargs, compares[1]);\r\n        },\r\n        rsortby: function (arr, varargs) {\r\n            return sortby(arr, varargs, compares[2]);\r\n        },\r\n        irsortby: function (arr, varargs) {\r\n            return sortby(arr, varargs, compares[3]);\r\n        },\r\n        groupby: function (arr, varargs) {\r\n            var result = {};\r\n            var fn = detectKeyFn(varargs, arr);\r\n            varargs.each(arr, function (i, v) {\r\n                var key = string(fn(v, i));\r\n                if (!result.hasOwnProperty(key)) {\r\n                    result[key] = arr.push ? [] : {};\r\n                }\r\n                result[key][arr.push ? result[key].length : i] = v;\r\n            }, fn);\r\n            return result;\r\n        },\r\n        addtime: function (obj, span) {\r\n            obj = asdate(obj);\r\n            if (!evallable(obj)) {\r\n                return obj;\r\n            }\r\n            var args = cached(parseTimeRange, span);\r\n            return +new Date(\r\n                args[0] + obj.getFullYear(),\r\n                args[1] + obj.getMonth(),\r\n                args[2] + obj.getDate(),\r\n                args[3] + obj.getHours(),\r\n                args[4] + obj.getMinutes(),\r\n                args[5] + obj.getSeconds(),\r\n                args[6] + obj.getMilliseconds()\r\n            );\r\n        },\r\n        in: function (value, varargs) {\r\n            var b = varargs.next(true);\r\n            return Array.isArray(b) ? b.indexOf(value) >= 0 : !!b && typeof b === 'object' && value in b;\r\n        },\r\n        '??': function (a, b) {\r\n            return a !== null && a !== undefined ? a : b;\r\n        },\r\n        '!!': function (obj, varargs) {\r\n            return !!(varargs.hasArgs() ? varargs.next() : obj);\r\n        },\r\n        '&&': function (value, varargs) {\r\n            return value ? varargs.reset() : varargs.stop();\r\n        },\r\n        '||': function (value, varargs) {\r\n            return !value ? varargs.reset() : varargs.stop();\r\n        },\r\n        '|': function (value, varargs) {\r\n            varargs.push(value);\r\n            return varargs.reset();\r\n        },\r\n        '{': function (obj, varargs) {\r\n            var globals = varargs.globals;\r\n            var prev = globals.new;\r\n            var o = {};\r\n            globals.new = o;\r\n            while (varargs.hasArgs()) {\r\n                var key = varargs.raw();\r\n                if (key === '}') {\r\n                    break;\r\n                }\r\n                o[string(isFunction(key) ? key() : key).replace(/:$/, '')] = varargs.next();\r\n            }\r\n            globals.new = prev;\r\n            return o;\r\n        },\r\n        ':json': function (value) {\r\n            return JSON.stringify(value);\r\n        },\r\n        ':query': function (obj) {\r\n            var arr = internals.buildParams([], obj);\r\n            return arr.join(\"&\").replace(/%20/g, \"+\");\r\n        },\r\n        ':date': function (obj, format) {\r\n            var date = obj instanceof Date ? obj : typeof obj === 'number' ? new Date(obj) : new Date(Date.parse(obj));\r\n            return isNaN(date) ? '' : internals.formatDate(date, format, this.DATE_LABELS);\r\n        },\r\n        ':printf': function (obj, format) {\r\n            return internals.sprintf(format, obj);\r\n        }\r\n    });\r\n    ('|>eval ?test !not +plus -minus *multiply /divide %mod ^pow ==equals !=notequals ~=iequals !~=inotequals ^=startswith $=endswith *=contains <less <=orless >more >=ormore ..to ?:choose &concat').replace(/(\\W{1,3})(\\S+)\\s?/g, function (v, a, b) {\r\n        pipes[a] = pipes[b];\r\n    });\r\n    each('where first any all none sum map test not sortby isortby rsortby irsortby groupby replace select as let in !! && || | {'.split(' '), function (i, v) {\r\n        pipes[v].varargs = true;\r\n    });\r\n\r\n    pipes.__default__ = (function (previous) {\r\n        return function (name) {\r\n            if (name.charAt(0) === '%') {\r\n                return function (obj) {\r\n                    return internals.sprintf(name, obj);\r\n                };\r\n            }\r\n            return previous(name);\r\n        };\r\n    }(pipes.__default__));\r\n\r\n    /*! jquery.js | Copyright jQuery Foundation and other contributors | Released under the MIT license */\r\n    /* istanbul ignore next */\r\n    (function (e) {\r\n        e.buildParams = function buildParams(arr, obj, prefix) {\r\n            if (prefix && Array.isArray(obj)) {\r\n                for (var i = 0, len = obj.length; i < len; i++) {\r\n                    if (/\\[\\]$/.test(prefix)) {\r\n                        arr[arr.length] = encodeURIComponent(prefix) + '=' + encodeURIComponent(obj[i]);\r\n                    } else {\r\n                        buildParams(arr, obj[i], prefix + \"[\" + (typeof obj[i] === \"object\" && obj[i] ? i : \"\") + \"]\");\r\n                    }\r\n                }\r\n            } else if (typeof obj === \"object\") {\r\n                for (var name in obj) {\r\n                    buildParams(arr, obj[name], prefix ? prefix + \"[\" + name + \"]\" : name);\r\n                }\r\n            } else {\r\n                arr[arr.length] = encodeURIComponent(prefix) + '=' + encodeURIComponent(obj);\r\n            }\r\n            return arr;\r\n        }\r\n    }(internals));\r\n\r\n    /*! sprintf.js | Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro> | 3 clause BSD license */\r\n    /* istanbul ignore next */\r\n    (function (e) {\r\n        function r(e) {\r\n            return Object.prototype.toString.call(e).slice(8, -1).toLowerCase()\r\n        }\r\n\r\n        function i(e, t) {\r\n            for (var n = []; t > 0; n[--t] = e);\r\n            return n.join(\"\")\r\n        }\r\n        var t = function () {\r\n            return t.cache.hasOwnProperty(arguments[0]) || (t.cache[arguments[0]] = t.parse(arguments[0])), t.format.call(null, t.cache[arguments[0]], arguments)\r\n        };\r\n        t.format = function (e, n) {\r\n            var s = 1,\r\n                o = e.length,\r\n                u = \"\",\r\n                a, f = [],\r\n                l, c, h, p, d, v;\r\n            for (l = 0; l < o; l++) {\r\n                u = r(e[l]);\r\n                if (u === \"string\") f.push(e[l]);\r\n                else if (u === \"array\") {\r\n                    h = e[l];\r\n                    if (h[2]) {\r\n                        a = n[s];\r\n                        for (c = 0; c < h[2].length; c++) {\r\n                            if (!a.hasOwnProperty(h[2][c])) throw t('[sprintf] property \"%s\" does not exist', h[2][c]);\r\n                            a = a[h[2][c]]\r\n                        }\r\n                    } else h[1] ? a = n[h[1]] : a = n[s++];\r\n                    if (/[^s]/.test(h[8]) && r(a) != \"number\") throw t(\"[sprintf] expecting number but found %s\", r(a));\r\n                    switch (h[8]) {\r\n                        case \"b\":\r\n                            a = a.toString(2);\r\n                            break;\r\n                        case \"c\":\r\n                            a = String.fromCharCode(a);\r\n                            break;\r\n                        case \"d\":\r\n                            a = parseInt(a, 10);\r\n                            break;\r\n                        case \"e\":\r\n                            a = h[7] ? a.toExponential(h[7]) : a.toExponential();\r\n                            break;\r\n                        case \"f\":\r\n                            a = h[7] ? parseFloat(a).toFixed(h[7]) : parseFloat(a);\r\n                            break;\r\n                        case \"o\":\r\n                            a = a.toString(8);\r\n                            break;\r\n                        case \"s\":\r\n                            a = (a = String(a)) && h[7] ? a.substring(0, h[7]) : a;\r\n                            break;\r\n                        case \"u\":\r\n                            a >>>= 0;\r\n                            break;\r\n                        case \"x\":\r\n                            a = a.toString(16);\r\n                            break;\r\n                        case \"X\":\r\n                            a = a.toString(16).toUpperCase()\r\n                    }\r\n                    a = /[def]/.test(h[8]) && h[3] && a >= 0 ? \"+\" + a : a, d = h[4] ? h[4] == \"0\" ? \"0\" : h[4].charAt(1) : \" \", v = h[6] - String(a).length, p = h[6] ? i(d, v) : \"\", f.push(h[5] ? a + p : p + a)\r\n                }\r\n            }\r\n            return f.join(\"\")\r\n        }, t.cache = {}, t.parse = function (e) {\r\n            var t = e,\r\n                n = [],\r\n                r = [],\r\n                i = 0;\r\n            while (t) {\r\n                if ((n = /^[^\\x25]+/.exec(t)) !== null) r.push(n[0]);\r\n                else if ((n = /^\\x25{2}/.exec(t)) !== null) r.push(\"%\");\r\n                else {\r\n                    if ((n = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(t)) === null) throw \"[sprintf] huh?\";\r\n                    if (n[2]) {\r\n                        i |= 1;\r\n                        var s = [],\r\n                            o = n[2],\r\n                            u = [];\r\n                        if ((u = /^([a-z_][a-z_\\d]*)/i.exec(o)) === null) throw \"[sprintf] huh?\";\r\n                        s.push(u[1]);\r\n                        while ((o = o.substring(u[0].length)) !== \"\")\r\n                            if ((u = /^\\.([a-z_][a-z_\\d]*)/i.exec(o)) !== null) s.push(u[1]);\r\n                            else {\r\n                                if ((u = /^\\[(\\d+)\\]/.exec(o)) === null) throw \"[sprintf] huh?\";\r\n                                s.push(u[1])\r\n                            }\r\n                        n[2] = s\r\n                    } else i |= 2;\r\n                    if (i === 3) throw \"[sprintf] mixing positional and named placeholders is not (yet) supported\";\r\n                    r.push(n)\r\n                }\r\n                t = t.substring(n[0].length)\r\n            }\r\n            return r\r\n        };\r\n        var n = function (e, n, r) {\r\n            return r = n.slice(0), r.splice(0, 0, e), t.apply(null, r)\r\n        };\r\n        e.sprintf = t, e.vsprintf = n\r\n    })(internals);\r\n\r\n    /*! formatdate.js | Copyright misonou | Released under the MIT license */\r\n    (function (e) {\r\n        'use strict';\r\n\r\n        var standardFormat = {\r\n            d: 'MM/dd/yyyy',\r\n            D: 'dddd, dd MMMM yyyy',\r\n            f: 'dddd, dd MMMM yyyy HH:mm',\r\n            F: 'dddd, dd MMMM yyyy HH:mm:ss',\r\n            g: 'MM/dd/yyyy HH:mm',\r\n            G: 'MM/dd/yyyy HH:mm:ss',\r\n            m: 'MMMM dd',\r\n            M: 'MMMM dd',\r\n            o: 'yyyy\\\\-MM\\\\-dd\\\\THH\\\\:mm\\\\:ss\\\\.fffffffK',\r\n            O: 'yyyy\\\\-MM\\\\-dd\\\\THH\\\\:mm\\\\:ss\\\\.fffffffK',\r\n            r: 'ddd, dd MMM yyyy HH\\\\:mm\\\\:ss \\\\G\\\\M\\\\T',\r\n            R: 'ddd, dd MMM yyyy HH\\\\:mm\\\\:ss \\\\G\\\\M\\\\T',\r\n            s: 'yyyy\\\\-MM\\\\-dd\\\\THH\\\\:mm\\\\:ss',\r\n            t: 'HH:mm',\r\n            T: 'HH:mm:ss',\r\n            u: 'yyyy\\\\-MM\\\\-dd HH\\\\:mm\\\\:ss\\\\Z',\r\n            U: 'dddd, dd MMMM yyyy HH:mm:ss',\r\n            y: 'yyyy MMMM',\r\n            Y: 'yyyy MMMM'\r\n        };\r\n        var defaultTranslations = {\r\n            shortWeekday: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\r\n            longWeekday: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n            shortMonth: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n            longMonth: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\r\n            designator: ['AM', 'PM'],\r\n            era: ['B.C.', 'A.D.'],\r\n            timeSeparator: ':',\r\n            dateSeparator: '/'\r\n        };\r\n\r\n        function padZero(num, len) {\r\n            num = String(num);\r\n            return num.length >= len ? num : (new Array(len + 1).join('0') + num).substr(-len);\r\n        }\r\n\r\n        function formatDate(date, format, translationsOverride) {\r\n            format = standardFormat[format] || format || '';\r\n            translationsOverride = translationsOverride || {};\r\n            var translations = {};\r\n            for (var i in defaultTranslations) {\r\n                translations[i] = translationsOverride[i] || defaultTranslations[i];\r\n            }\r\n\r\n            function getString(specifier) {\r\n                var len = specifier.length;\r\n                switch (specifier.charAt(0)) {\r\n                    case 'd':\r\n                        return len === 4 ? translations.longWeekday[date.getDay()] : len === 3 ? translations.shortWeekday[date.getDay()] : padZero(date.getDate(), len);\r\n                    case 'f':\r\n                    case 'F':\r\n                        var str = (date.getMilliseconds() + '000000').substr(0, len);\r\n                        return specifier.charAt(0) === 'f' || !/^0+$/.test(str) ? str : '';\r\n                    case 'g':\r\n                        return translations.era[+(date.getFullYear() >= 0)];\r\n                    case 'h':\r\n                        return padZero((date.getHours() % 12) || 12, len);\r\n                    case 'H':\r\n                        return padZero(date.getHours(), len);\r\n                    case 'm':\r\n                        return padZero(date.getMinutes(), len);\r\n                    case 'M':\r\n                        return len === 4 ? translations.longMonth[date.getMonth()] : len === 3 ? translations.shortMonth[date.getMonth()] : padZero(date.getMonth() + 1, len);\r\n                    case 's':\r\n                        return padZero(date.getSeconds(), len);\r\n                    case 't':\r\n                        return translations.designator[+(date.getHours() >= 12)].substr(0, len);\r\n                    case 'y':\r\n                        return padZero(len >= 3 ? date.getFullYear() : date.getYear(), len);\r\n                    case 'K':\r\n                    case 'z':\r\n                        var offset = date.getTimezoneOffset();\r\n                        return len === 3 || specifier === 'K' ?\r\n                            (offset >= 0 ? '-' : '+') + padZero(Math.abs(offset / 60) | 0, 2) + ':' + padZero((Math.abs(offset) % 60), 2) :\r\n                            (offset >= 0 ? '-' : '+') + padZero(Math.abs(offset / 60) | 0, len);\r\n                    case ':':\r\n                        return translations.timeSeparator;\r\n                    case '/':\r\n                        return translations.dateSeparator;\r\n                }\r\n            }\r\n\r\n            var arr = [];\r\n            var m, r = /%?(?:(?!\\\\)(d{1,4}|f{1,7}|F{1,7}|g{1,2}|h{1,2}|H{1,2}|K|m{1,2}|M{1,4}|s{1,2}|t{1,2}|y{1,5}|z{1,3}|\\:|\\/))|\\\\?(.)/g;\r\n            while ((m = r.exec(format)) !== null) {\r\n                arr.push(m[1] ? getString(m[1]) : m[2]);\r\n            }\r\n            return arr.join('');\r\n        }\r\n\r\n        e.formatDate = formatDate;\r\n    })(internals);\r\n\r\n    /* istanbul ignore next */\r\n    if (!Array.isArray) {\r\n        Array.isArray = function (arg) {\r\n            return Object.prototype.toString.call(arg) === '[object Array]';\r\n        };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof document !== 'undefined' && document.querySelectorAll) {\r\n        each(document.querySelectorAll('script[type=\"text/x-waterpipe\"]'), function (i, v) {\r\n            pipes[v.id] = v.innerHTML;\r\n        });\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof module === 'object') {\r\n        waterpipe.with = function () {\r\n            return waterpipe;\r\n        };\r\n    }\r\n    waterpipe.version = VERSION;\r\n    return waterpipe;\r\n})();\r\n\r\nexport default waterpipe;\r\n"],"names":["root","factory","exports","module","define","amd","this","waterpipe","previous","OP_EVAL","OP_TEST","OP_ITER_END","OP_ITER","OP_JUMP","OP_SPACE","OP_TEXT","EVAL_STACK","EVAL_ITER_KEY","EVAL_ITER_INDEX","EVAL_ITER_COUNT","EVAL_GLOBAL","EVAL_NOW","EVAL_TODAY","EVAL_RAND","TOKEN_IF","TOKEN_IFNOT","TOKEN_ELSE","TOKEN_ELSEIF","TOKEN_ELSEIFNOT","TOKEN_FOREACH","NEWLINE","VOID_TAGS","split","CONSTANTS","undefined","RegExp","constructor","evalCount","execStack","collator","Intl","Collator","caseFirst","pipes","Object","create","internals","vutil","each","compares","a","b","compare","cached","fn","str","cache","hasOwnProperty","asdate","obj","evallable","Date","string","test","setHours","slice","length","arguments","arr","Array","i","isFunction","value","isString","isObject","primitive","hasProperty","name","isArray","pass","constFn","keyFn","key","detectKeyFn","varargs","defaultFn","isValidKey","first","v","state","raw","eval","run","next","json","JSON","stringify","e","String","repeat","count","join","indent","level","start","reverseIndex","parseTimeRange","dir","m","args","re","exec","parseInt","indexOf","parseRegExp","charAt","$1","$2","parseObjectPath","r","t","cur","list","end","parent","pop","evalMode","stackIndex","detectObjectPathMode","index","push","arg","escape","preserveEntity","html","lastIndex","charCodeAt","substring","hyphenate","replace","toLowerCase","callback","len","getOwnPropertyNames","extend","apply","prop","where","filter","map","result","returnValue","negate","ignoreCase","Math","min","x","y","sortby","tmp","sort","inherit","base","values","Anonymous","prototype","formatCallSite","cstart","cend","substr","reverse","lineStart","lastIndexOf","line","strargs","needle","Pipe","PipeArgument","prev","canEvaluate","self","textValue","parseFloat","typeValue","parsePipe","n","unshift","parse","tokens","controlStack","htmlStack","lastIndentWS","assert","Error","getPipe","parseHTML","htmlStackCount","isScriptOrStyle","opened","tagName","shiftHtmlStack","shift","writeText","stripWS","nstr","op","ovalue","nvalue","attrName","newline","last1","last2","ostr","text","stripWSEnd","isTagEnd","ch","muteTagEnd","$3","tokenName","token","tokenIf","tokenIndex","condition","previousControl","splice","expression","noescape","j","Iterable","keys","evaluate","options","outstr","output","objStack","iteratorStack","warnedPos","objAt","get","evaluateInScope","evaluateObjectPathPart","p","evaluateObjectPath","objectPath","acceptShorthand","valid","globals","random","evaluatePipe","pipe","returnArray","input","resetPos","stop","reset","hasArgs","preferObject","wrapFn","iterable","startpos","func","__default__","call","noWarning","console","warn","toString","stack","src","dst","src2","len2","flatten","concat","ws","prevCount","noEncode","k","indentPadding","trimStart","data","getOptions","defaultOptions","max","abs","round","floor","ceil","as","let","select","more","less","ormore","orless","between","c","d","equals","notequals","iequals","inotequals","startswith","endswith","even","num","odd","contains","like","regex","or","val","not","choose","bool","trueValue","falseValue","testFn","trueFn","falseFn","trim","trimstart","trimend","padstart","padend","removestart","removeend","cutbefore","cutbeforelast","cutafter","cutafterlast","separator","upper","toUpperCase","lower","ucfirst","lcfirst","plus","minus","multiply","divide","mod","pow","to","pattern","numDigit","isNaN","step","format","isort","rsort","irsort","unique","hash","any","all","none","sum","isortby","rsortby","irsortby","groupby","addtime","span","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","in","new","o","buildParams","date","formatDate","DATE_LABELS","sprintf","prefix","encodeURIComponent","l","h","s","u","f","fromCharCode","toExponential","toFixed","vsprintf","standardFormat","D","F","g","G","M","O","R","T","U","Y","defaultTranslations","shortWeekday","longWeekday","shortMonth","longMonth","designator","era","timeSeparator","dateSeparator","padZero","translationsOverride","translations","getString","specifier","getDay","getYear","offset","getTimezoneOffset","document","querySelectorAll","id","innerHTML","with","version"],"sourceRoot":""}